<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASER Â· professional design studio</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts: Inter + Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,600;14..32,700;14..32,900&family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
    <!-- Firebase (legacy compat for existing code) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        /* Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙƒÙ…Ø§ Ù‡ÙŠ - Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(-45deg, #667eea, #764ba2, #6b8cff, #a363d9);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #1e1e2f;
            line-height: 1.5;
            overflow-x: hidden;
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .brand {
            text-align: center;
            padding: 1.2rem 1rem 0.4rem;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        .brand h1 {
            font-size: 2.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, #fff, #f0f3fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .brand p {
            color: rgba(255,255,255,0.9);
            font-weight: 400;
            margin-top: 0.2rem;
        }
        .offer-bar {
            background: rgba(12,20,36,0.9);
            backdrop-filter: blur(5px);
            color: #ffdb9d;
            padding: 15px 0;
            overflow: hidden;
            white-space: nowrap;
            border-block: 2px solid rgba(255,255,255,0.15);
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .offer-bar .offer-slide {
            display: inline-block;
            animation: scrollOffer 30s linear infinite;
        }
        .offer-bar .offer-slide span {
            margin-right: 60px;
            display: inline-block;
            background: rgba(255,255,255,0.1);
            padding: 5px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .offer-bar .offer-slide i {
            margin: 0 15px;
            color: #ffb86b;
            font-size: 1.1rem;
        }
        @keyframes scrollOffer {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .video-slider {
            max-width: 1300px;
            margin: 2rem auto 1.5rem;
            padding: 0 20px;
        }
        .video-container {
            position: relative;
            width: 100%;
            border-radius: 40px;
            overflow: hidden;
            aspect-ratio: 16 / 7;
            background: #111a2b;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 25px 40px -10px rgba(0,0,0,0.5);
        }
        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .video-container::after {
            content: "âš¡ ASER SHOWREEL â€¢ always moving";
            position: absolute;
            bottom: 20px;
            left: 30px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            color: white;
            padding: 6px 20px;
            border-radius: 60px;
            font-size: 0.9rem;
        }
        .design-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 25px;
        }
        .design-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 20px 35px -8px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s;
        }
        .design-card:hover {
            transform: translateY(-10px);
        }
        .card-media {
            aspect-ratio: 1/1;
            border-radius: 30px;
            overflow: hidden;
            margin-bottom: 16px;
            border: 3px solid white;
        }
        .moving-img {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            animation: subtleZoom 6s infinite alternate;
        }
        @keyframes subtleZoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.08); }
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 10px;
        }
        .design-title {
            font-size: 1.6rem;
            font-weight: 900;
            background: linear-gradient(145deg, #121826, #2c3a6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .price-row {
            display: flex;
            gap: 5px;
            background: #eef2f9;
            padding: 5px 14px;
            border-radius: 60px;
            font-weight: 700;
        }
        .design-desc {
            color: #2f405c;
            font-size: 0.95rem;
            margin: 12px 0 15px;
        }
        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn-open, .btn-buy {
            flex: 1;
            border-radius: 50px;
            padding: 12px;
            cursor: pointer;
            border: none;
            font-weight: 700;
            transition: transform 0.2s;
        }
        .btn-open {
            background: white;
            border: 2px solid #1d2b44;
            color: #1d2b44;
        }
        .btn-buy {
            background: #ff8a4c;
            color: white;
            box-shadow: 0 5px 12px #ff8a4c80;
        }
        .btn-open:hover, .btn-buy:hover {
            transform: translateY(-2px);
        }
        .seo-footer {
            background: rgba(12,20,36,0.95);
            backdrop-filter: blur(10px);
            border-top: 2px solid rgba(255,255,255,0.15);
            border-bottom: 2px solid rgba(255,255,255,0.15);
            padding: 25px 20px;
            margin-top: 40px;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.3);
        }
        .seo-container {
            max-width: 1300px;
            margin: 0 auto;
        }
        .seo-title {
            color: #ffb86b;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }
        .seo-words-wrapper {
            width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 15px;
            scrollbar-width: thin;
            scrollbar-color: #667eea #2d2d4a;
        }
        .seo-words-wrapper::-webkit-scrollbar {
            height: 8px;
        }
        .seo-words-wrapper::-webkit-scrollbar-track {
            background: #2d2d4a;
            border-radius: 10px;
        }
        .seo-words-wrapper::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
        }
        .seo-words {
            display: flex;
            flex-wrap: nowrap;
            gap: 15px;
            min-width: min-content;
            padding: 5px 0;
        }
        .seo-word {
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            padding: 12px 25px;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            animation: floatWord 3s ease-in-out infinite;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .seo-word:nth-child(odd) {
            animation-delay: 0.5s;
        }
        .seo-word:nth-child(3n) {
            animation-delay: 1s;
        }
        .seo-word:nth-child(5n) {
            animation-delay: 1.5s;
        }
        @keyframes floatWord {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-5px) scale(1.05); }
        }
        .seo-word:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scale(1.1) translateY(-5px);
            cursor: pointer;
        }
        .admin-btn {
            position: fixed;
            right: 25px;
            bottom: 25px;
            z-index: 1500;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: pointer;
            border: 3px solid white;
            animation: pulse 2s infinite;
            font-size: 24px;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .admin-panel {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            overflow: auto;
            direction: rtl;
            font-family: 'Cairo', 'Inter', sans-serif;
        }
        .admin-box {
            max-width: 1300px;
            margin: auto;
            background: #1a1c2e;
            color: #fff;
            border-radius: 30px;
            box-shadow: 0 35px 90px rgba(0,0,0,0.6);
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }
        .admin-header h2 {
            margin: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
        }
        .close-admin {
            background: #ff4444;
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1rem;
        }
        .tabs {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }
        .tab {
            padding: 12px 25px;
            border-radius: 50px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            font-size: 1rem;
        }
        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: transparent;
        }
        .panel {
            display: none;
        }
        .panel.active {
            display: block;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .field {
            margin-bottom: 15px;
        }
        .field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: rgba(255,255,255,0.9);
            font-size: 1rem;
        }
        .field input, .field textarea, .field select {
            width: 100%;
            padding: 14px 18px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.14);
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 15px;
            font-family: 'Cairo', sans-serif;
        }
        .field textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.7;
        }
        .field textarea::placeholder {
            color: rgba(255,255,255,0.5);
        }
        .helper-text {
            font-size: 0.85rem;
            color: #ffb86b;
            margin-top: 5px;
        }
        .save-btn {
            width: 100%;
            padding: 16px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 700;
            cursor: pointer;
            margin: 15px 0;
            font-size: 1.1rem;
            transition: transform 0.2s;
        }
        .save-btn:hover {
            transform: translateY(-2px);
        }
        .items-list {
            margin-top: 25px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 20px;
            max-height: 450px;
            overflow-y: auto;
        }
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.08);
            margin-bottom: 10px;
            background: rgba(255,255,255,0.02);
        }
        .list-item:last-child {
            margin-bottom: 0;
        }
        .item-info {
            flex: 1;
        }
        .item-info .title {
            font-weight: 700;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        .item-info .meta {
            font-size: 0.9rem;
            opacity: 0.7;
        }
        .danger-btn {
            background: #ff4444;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 700;
        }
        .success-btn {
            background: #28a745;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 700;
        }
        .small-btn {
            padding: 8px 15px;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .preview-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            visibility: hidden;
            opacity: 0;
            transition: 0.2s;
            padding: 20px;
        }
        .preview-modal.active {
            visibility: visible;
            opacity: 1;
        }
        .preview-content {
            background: white;
            max-width: 1300px;
            width: 100%;
            border-radius: 40px;
            padding: 30px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .preview-header h2 {
            font-size: 2rem;
            background: linear-gradient(145deg, #121826, #2c3a6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .preview-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .preview-controls button, .preview-controls a {
            padding: 12px 25px;
            border-radius: 40px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            background: #f0f2f5;
            color: #1e1e2f;
        }
        .preview-controls .primary-btn {
            background: #667eea;
            color: white;
        }
        .iframe-container {
            width: 100%;
            height: 65vh;
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid #eef2f9;
            background: #fff;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .preview-note {
            margin-top: 15px;
            padding: 12px;
            background: #fff3cd;
            border-radius: 40px;
            color: #856404;
            font-size: 0.95rem;
            text-align: center;
        }
        .purchase-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            visibility: hidden;
            opacity: 0;
        }
        .purchase-modal.active {
            visibility: visible;
            opacity: 1;
        }
        .purchase-content {
            background: white;
            max-width: 500px;
            width: 90%;
            border-radius: 40px;
            padding: 30px;
        }
        .purchase-content input, .purchase-content textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 30px;
            border: 1px solid #ddd;
        }
        .whatsapp-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 18px;
            width: 100%;
            border-radius: 40px;
            font-weight: 700;
            cursor: pointer;
            font-size: 1.1rem;
        }
        @media (max-width: 700px) {
            .brand h1 { font-size: 2rem; }
            .preview-header { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>

<!-- ========== HEADER ========== -->
<div class="brand">
    <h1>Ø¢Ø³Ø± Ù„Ù„ØªØµÙ…ÙŠÙ… Â· ASER STUDIO</h1>
    <p>motion Â· identity Â· digital squares</p>
</div>

<!-- ========== Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ØªØ­Ø±Ùƒ ========== -->
<div class="offer-bar" id="offerBar">
    <div class="offer-slide" id="offerSlide">
        <!-- Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù† Firebase -->
    </div>
</div>

<!-- ========== ÙÙŠØ¯ÙŠÙˆ Ø³Ù„Ø§ÙŠØ¯Ø± ========== -->
<div class="video-slider">
    <div class="video-container">
        <video id="mainVideo" autoplay muted loop playsinline>
            <source id="videoSource" src="https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" type="video/mp4">
        </video>
    </div>
</div>

<!-- ========== Ø´Ø¨ÙƒØ© Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª ========== -->
<div class="design-grid" id="designGrid"></div>

<!-- ========== Ù…Ø±Ø¨Ø¹ SEO Ø§Ù„Ù…ØªØ­Ø±Ùƒ ========== -->
<div class="seo-footer" id="seoFooter">
    <div class="seo-container">
        <div class="seo-title">
            <i class="fas fa-tags"></i> POPULAR SEARCH TERMS
        </div>
        <div class="seo-words-wrapper">
            <div class="seo-words" id="seoWords">
                <!-- ÙƒÙ„Ù…Ø§Øª SEO Ù…Ù† Firebase -->
            </div>
        </div>
    </div>
</div>

<!-- ========== Ø²Ø± Admin ========== -->
<div class="admin-btn" onclick="showAdminPanel()">
    <i class="fas fa-cog"></i>
</div>

<!-- ========== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©) ========== -->
<div id="adminPanel" class="admin-panel">
    <div class="admin-box">
        <div class="admin-header">
            <h2><i class="fas fa-crown"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¢Ø³Ø±</h2>
            <button class="close-admin" onclick="hideAdminPanel()"><i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚</button>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('designs')"><i class="fas fa-paint-brush"></i> Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª</button>
            <button class="tab" onclick="switchTab('offers')"><i class="fas fa-tags"></i> Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
            <button class="tab" onclick="switchTab('seo')"><i class="fas fa-search"></i> ÙƒÙ„Ù…Ø§Øª SEO</button>
            <button class="tab" onclick="switchTab('settings')"><i class="fas fa-sliders-h"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button class="tab" onclick="switchTab('export')"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ±/Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª -->
        <div id="tab-designs" class="panel active">
            <div class="grid-2">
                <div class="field">
                    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ…</label>
                    <input id="designTitle" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…ÙˆÙ‚Ø¹ Ø´Ø±ÙƒØ©">
                </div>
                <div class="field">
                    <label>Ø§Ù„Ø³Ø¹Ø± ($)</label>
                    <input id="designPrice" type="number" value="299">
                </div>
                <div class="field">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©</label>
                    <input id="designImage" placeholder="https://...">
                </div>
                <div class="field">
                    <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)</label>
                    <input id="designPreview" placeholder="https://example.com">
                </div>
                <div class="field" style="grid-column:1/-1">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="designDesc" placeholder="ÙˆØµÙ Ø§Ù„ØªØµÙ…ÙŠÙ…..."></textarea>
                </div>
            </div>
            <button class="save-btn" onclick="addDesign()"><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯</button>
            <div class="items-list" id="designsList"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
        <div id="tab-offers" class="panel">
            <div class="field">
                <label>ğŸ¯ Ù†ØµÙˆØµ Ø§Ù„Ø¹Ø±ÙˆØ¶ (Ø³Ø·Ø± Ù„ÙƒÙ„ Ø¹Ø±Ø¶)</label>
                <textarea id="offerText" placeholder="ğŸ”¥ FLASH 25% OFF ON ALL PACKAGES ğŸ”¥
âœ¨ FREE CONSULTATION WITH EVERY ORDER âœ¨
ğŸš€ UNLIMITED REVISIONS FOR PREMIUM âœ¨
ğŸ’ SPECIAL DISCOUNT FOR NEW CLIENTS ğŸ’"></textarea>
                <div class="helper-text">
                    <i class="fas fa-info-circle"></i> Ø§ÙƒØªØ¨ ÙƒÙ„ Ø¹Ø±Ø¶ ÙÙŠ Ø³Ø·Ø± Ù…Ù†ÙØµÙ„.
                </div>
            </div>
            <button class="save-btn" onclick="updateOffers()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ ÙƒÙ„Ù…Ø§Øª SEO -->
        <div id="tab-seo" class="panel">
            <div class="field">
                <label>ğŸ”‘ ÙƒÙ„Ù…Ø§Øª SEO (Ø³Ø·Ø± Ù„ÙƒÙ„ ÙƒÙ„Ù…Ø©)</label>
                <textarea id="seoText" placeholder="Web Design
UI/UX
E-commerce
Mobile App
Branding
Graphic Design
Digital Marketing
SEO
WordPress
Frontend Development"></textarea>
                <div class="helper-text">
                    <i class="fas fa-info-circle"></i> Ø§ÙƒØªØ¨ ÙƒÙ„ ÙƒÙ„Ù…Ø© ÙÙŠ Ø³Ø·Ø± Ù…Ù†ÙØµÙ„.
                </div>
            </div>
            <button class="save-btn" onclick="updateSeoWords()"><i class="fas fa-save"></i> Ø­ÙØ¸ ÙƒÙ„Ù…Ø§Øª SEO</button>
            <div class="items-list" style="max-height: 200px;">
                <h4 style="margin-bottom: 10px;">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª:</h4>
                <div id="seoPreview" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;"></div>
            </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div id="tab-settings" class="panel">
            <div class="grid-2">
                <div class="field">
                    <label>ğŸ’± Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                    <select id="currencySymbol">
                        <option value="$">Ø¯ÙˆÙ„Ø§Ø± $</option>
                        <option value="â‚¬">ÙŠÙˆØ±Ùˆ â‚¬</option>
                        <option value="Â£">Ø¬Ù†ÙŠÙ‡ Â£</option>
                        <option value="Â¥">ÙŠÙ† Â¥</option>
                    </select>
                </div>
                <div class="field">
                    <label>ğŸ¬ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</label>
                    <input id="videoUrl" value="https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4">
                </div>
            </div>
            <button class="save-btn" onclick="updateSettings()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ ØªØµØ¯ÙŠØ±/Ø§Ø³ØªÙŠØ±Ø§Ø¯ -->
        <div id="tab-export" class="panel">
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button class="save-btn" style="flex:1;" onclick="exportData()"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                <button class="save-btn" style="flex:1;" onclick="importData()"><i class="fas fa-upload"></i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
            <div style="margin-top: 25px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 20px;">
                <p style="color: #aaa; text-align: center;">âœ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Firebase Ù†Ø´Ø·Ø© â€¢ ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</p>
            </div>
        </div>
    </div>
</div>

<!-- ========== Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ========== -->
<div id="previewModal" class="preview-modal">
    <div class="preview-content">
        <div class="preview-header">
            <h2 id="previewTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ…</h2>
            <div class="preview-controls">
                <button onclick="reloadPreviewFrame()"><i class="fas fa-redo"></i> ØªØ­Ø¯ÙŠØ«</button>
                <a id="previewOpenNewTab" href="#" target="_blank" class="primary-btn"><i class="fas fa-external-link-alt"></i> ÙØªØ­ ÙÙŠ ØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
                <button onclick="closePreviewModal()"><i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
        <div class="iframe-container">
            <iframe id="previewFrame" src="about:blank" sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-top-navigation"></iframe>
        </div>
        <div class="preview-note">
            <i class="fas fa-info-circle"></i> Ù‡Ø°Ù‡ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø­ÙŠØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹. Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù‚Ø¯ ØªÙ…Ù†Ø¹ Ø§Ù„Ø¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ iframe - ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "ÙØªØ­ ÙÙŠ ØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯".
        </div>
    </div>
</div>

<!-- ========== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ ========== -->
<div id="purchaseModal" class="purchase-modal">
    <div class="purchase-content">
        <h2 id="purchaseTitle"></h2>
        <p id="purchaseDesc"></p>
        <input type="text" id="clientName" placeholder="Ø§Ù„Ø§Ø³Ù…">
        <input type="text" id="clientPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" value="+20 1507881044">
        <textarea id="clientDetails" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨..."></textarea>
        <button class="whatsapp-btn" onclick="sendWhatsApp()"><i class="fab fa-whatsapp"></i> Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button style="margin-top:10px; width:100%; padding:15px;" onclick="closePurchaseModal()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<!-- ========== JavaScript Ø§Ù„Ù…Ø­Ø³Ù† Ù…Ø¹ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© ========== -->
<script>
    // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ====================
    
    // Firebase Config (Ø§Ù„Ø£ÙˆÙ„Ù‰ - Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
    const firebaseConfig1 = {
        apiKey: "AIzaSyCkign3vnAZ6X1cCaAUvN3cVUaGpIigGNQ",
        authDomain: "mostafaaser-b0053.firebaseapp.com",
        databaseURL: "https://mostafaaser-b0053-default-rtdb.firebaseio.com",
        projectId: "mostafaaser-b0053",
        storageBucket: "mostafaaser-b0053.firebasestorage.app",
        messagingSenderId: "336529119748",
        appId: "1:336529119748:web:6d02cee38c7965bda8f351"
    };

    // Firebase Config (Ø§Ù„Ø«Ø§Ù†ÙŠØ© - Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
    const firebaseConfig2 = {
        apiKey: "AIzaSyBR8HOhNurHtpDXQQ7el8DbW-5kydA2hI8",
        authDomain: "user-8bba7.firebaseapp.com",
        projectId: "user-8bba7",
        storageBucket: "user-8bba7.firebasestorage.app",
        messagingSenderId: "816054611920",
        appId: "1:816054611920:web:8b74a954704002cc8013d5",
        measurementId: "G-NV8PHC8LEQ"
    };

    let firebaseApp, database;
    let firebaseApp2, database2;
    
    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©
    try {
        if (!firebase.apps.length) {
            firebaseApp = firebase.initializeApp(firebaseConfig1, "primary");
        } else {
            firebaseApp = firebase.app("primary") || firebase.initializeApp(firebaseConfig1, "primary");
        }
        database = firebaseApp.database();
        console.log('âœ… Firebase primary connected');
    } catch(e) { 
        console.warn('âš ï¸ Firebase primary init failed', e); 
    }
    
    try {
        firebaseApp2 = firebase.initializeApp(firebaseConfig2, "secondary");
        database2 = firebaseApp2.database();
        console.log('âœ… Firebase secondary connected');
    } catch(e) { 
        console.warn('âš ï¸ Firebase secondary init failed', e); 
    }

    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø¹ Ù‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)
    let globalData = {
        designs: [],
        settings: {
            offers: [
                "ğŸ”¥ FLASH 25% OFF ON ALL PACKAGES ğŸ”¥",
                "âœ¨ FREE CONSULTATION WITH EVERY ORDER âœ¨",
                "ğŸš€ UNLIMITED REVISIONS FOR PREMIUM âœ¨"
            ],
            seoWords: [
                "Web Design", "UI/UX", "E-commerce", "Mobile App", "Branding",
                "Graphic Design", "Digital Marketing", "SEO", "WordPress", "Frontend Development",
                "Backend Development", "React", "Vue.js", "Angular", "Node.js",
                "Python", "PHP", "Laravel", "MySQL", "MongoDB"
            ],
            currency: "$",
            videoUrl: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4"
        },
        lastUpdated: new Date().toISOString()
    };

    // ========== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© ==========
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase
    function loadFromFirebase() {
        if (database) {
            database.ref('aser_studio_data').once('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    globalData = data;
                    console.log('ğŸ“¥ Data loaded from Firebase primary');
                    renderAll();
                } else {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙØ§Ø±ØºØ©ØŒ Ø¬Ø±Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠØ©
                    loadFromSecondaryFirebase();
                }
            }).catch(() => {
                loadFromSecondaryFirebase();
            });
        } else {
            loadFromSecondaryFirebase();
        }
    }
    
    function loadFromSecondaryFirebase() {
        if (database2) {
            database2.ref('aser_studio_data').once('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    globalData = data;
                    console.log('ğŸ“¥ Data loaded from Firebase secondary');
                } else {
                    loadFromLocalStorage();
                }
                renderAll();
            }).catch(() => {
                loadFromLocalStorage();
                renderAll();
            });
        } else {
            loadFromLocalStorage();
            renderAll();
        }
    }
    
    function loadFromLocalStorage() {
        const saved = localStorage.getItem('aser_design_data');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                if (parsed.designs) globalData.designs = parsed.designs;
                if (parsed.settings) {
                    if (parsed.settings.offers) globalData.settings.offers = parsed.settings.offers;
                    if (parsed.settings.seoWords) globalData.settings.seoWords = parsed.settings.seoWords;
                    if (parsed.settings.currency) globalData.settings.currency = parsed.settings.currency;
                    if (parsed.settings.videoUrl) globalData.settings.videoUrl = parsed.settings.videoUrl;
                }
                console.log('ğŸ“¥ Data loaded from localStorage');
            } catch(e) {}
        }
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª ÙØ§Ø±ØºØ©ØŒ Ø£Ø¶Ù ØªØµØ§Ù…ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        if (globalData.designs.length === 0) {
            globalData.designs = [
                { id: 1, title: "NOVA", desc: "Futuristic UI/UX with glassmorphism.", price: 129, image: "https://picsum.photos/400/400?grayscale&seed=101", preview: "https://example.com" },
                { id: 2, title: "ORION", desc: "Bold & geometric â€“ for branding.", price: 199, image: "https://picsum.photos/400/400?grayscale&seed=202", preview: "https://example.com" },
                { id: 3, title: "SPECTRA", desc: "Colorful gradients for agencies.", price: 249, image: "https://picsum.photos/400/400?grayscale&seed=303", preview: "https://example.com" }
            ];
        }
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    function saveToAll() {
        globalData.lastUpdated = new Date().toISOString();
        
        // Ø­ÙØ¸ ÙÙŠ localStorage
        localStorage.setItem('aser_design_data', JSON.stringify(globalData));
        
        // Ø­ÙØ¸ ÙÙŠ Firebase primary
        if (database) {
            database.ref('aser_studio_data').set(globalData)
                .then(() => console.log('âœ… Saved to Firebase primary'))
                .catch(err => console.warn('âš ï¸ Failed to save to primary', err));
        }
        
        // Ø­ÙØ¸ ÙÙŠ Firebase secondary
        if (database2) {
            database2.ref('aser_studio_data').set(globalData)
                .then(() => console.log('âœ… Saved to Firebase secondary'))
                .catch(err => console.warn('âš ï¸ Failed to save to secondary', err));
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        showNotification('âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©');
    }
    
    // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
    function showNotification(message) {
        const notif = document.createElement('div');
        notif.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            z-index: 9999;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideDown 0.3s ease;
        `;
        notif.textContent = message;
        document.body.appendChild(notif);
        
        setTimeout(() => {
            notif.style.animation = 'slideUp 0.3s ease';
            setTimeout(() => notif.remove(), 300);
        }, 2000);
    }

    // ========== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¹Ø±Ø¶ ==========
    function renderAll() {
        renderDesigns();
        updateOfferBar();
        updateSeoWordsDisplay();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
        document.getElementById('videoSource').src = globalData.settings.videoUrl;
        document.getElementById('mainVideo').load();
        document.getElementById('mainVideo').play();
    }

    function renderDesigns() {
        const grid = document.getElementById('designGrid');
        if (!grid) return;
        
        grid.innerHTML = '';
        globalData.designs.forEach(d => {
            const card = document.createElement('div');
            card.className = 'design-card';
            card.innerHTML = `
                <div class="card-media"><div class="moving-img" style="background-image: url('${d.image}');"></div></div>
                <div class="card-header">
                    <span class="design-title">${d.title}</span>
                    <div class="price-row">${globalData.settings.currency}${d.price}</div>
                </div>
                <div class="design-desc">${d.desc}</div>
                <div class="card-actions">
                    <button class="btn-open" onclick="openPreview(${d.id})"><i class="fa-regular fa-eye"></i> open</button>
                    <button class="btn-buy" onclick="openPurchase(${d.id})"><i class="fa-solid fa-cart-shopping"></i> buy now</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function updateOfferBar() {
        const slide = document.getElementById('offerSlide');
        if (!slide) return;
        
        let offersHtml = '';
        if (globalData.settings.offers && globalData.settings.offers.length > 0) {
            for (let i = 0; i < 2; i++) {
                globalData.settings.offers.forEach(offer => {
                    offersHtml += `<span>${offer}</span> <i class="fa-regular fa-star"></i> `;
                });
            }
        } else {
            offersHtml = '<span>ğŸ”¥ SPECIAL OFFERS ğŸ”¥</span> <i class="fa-regular fa-star"></i> ';
        }
        slide.innerHTML = offersHtml;
    }

    function updateSeoWordsDisplay() {
        const container = document.getElementById('seoWords');
        if (!container) return;
        
        container.innerHTML = '';
        if (globalData.settings.seoWords && globalData.settings.seoWords.length > 0) {
            globalData.settings.seoWords.forEach(word => {
                const span = document.createElement('span');
                span.className = 'seo-word';
                span.textContent = word;
                span.onclick = () => {
                    window.open(`https://www.google.com/search?q=${encodeURIComponent(word)}`, '_blank');
                };
                container.appendChild(span);
            });
        } else {
            const span = document.createElement('span');
            span.className = 'seo-word';
            span.textContent = 'Web Design';
            container.appendChild(span);
        }
        
        const preview = document.getElementById('seoPreview');
        if (preview) {
            preview.innerHTML = '';
            if (globalData.settings.seoWords && globalData.settings.seoWords.length > 0) {
                globalData.settings.seoWords.slice(0, 8).forEach(word => {
                    const span = document.createElement('span');
                    span.style.cssText = 'background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 30px; font-size: 0.9rem;';
                    span.textContent = word;
                    preview.appendChild(span);
                });
            }
        }
    }

    // ========== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ ==========
    function openPreview(id) {
        const d = globalData.designs.find(x => x.id === id);
        if (!d) return;
        
        let previewUrl = d.preview || 'about:blank';
        if (!previewUrl.startsWith('http')) {
            previewUrl = 'https://' + previewUrl;
        }
        
        document.getElementById('previewTitle').textContent = d.title;
        document.getElementById('previewOpenNewTab').href = previewUrl;
        document.getElementById('previewFrame').src = previewUrl;
        document.getElementById('previewModal').classList.add('active');
    }

    function reloadPreviewFrame() {
        const frame = document.getElementById('previewFrame');
        frame.src = frame.src;
    }

    function closePreviewModal() {
        document.getElementById('previewModal').classList.remove('active');
        document.getElementById('previewFrame').src = 'about:blank';
    }

    let currentPurchaseId = null;
    
    function openPurchase(id) {
        const d = globalData.designs.find(x => x.id === id);
        if (!d) return;
        
        currentPurchaseId = id;
        document.getElementById('purchaseTitle').textContent = d.title;
        document.getElementById('purchaseDesc').textContent = `${d.desc} | ${globalData.settings.currency}${d.price}`;
        document.getElementById('purchaseModal').classList.add('active');
    }

    function closePurchaseModal() {
        document.getElementById('purchaseModal').classList.remove('active');
    }

    function sendWhatsApp() {
        const name = document.getElementById('clientName').value;
        const phone = document.getElementById('clientPhone').value;
        const details = document.getElementById('clientDetails').value;
        const d = globalData.designs.find(x => x.id === currentPurchaseId);
        
        if (!name || !phone) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');
            return;
        }
        
        const msg = `Hello ASER STUDIO, I want to order design: *${d.title}* (${globalData.settings.currency}${d.price}). Name: ${name}. Phone: ${phone}. Details: ${details}`;
        window.open(`https://wa.me/201507881044?text=${encodeURIComponent(msg)}`, '_blank');
        closePurchaseModal();
    }

    // ========== Ø¯ÙˆØ§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ==========
    function showAdminPanel() {
        const pwd = prompt('ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:');
        if (pwd !== '332004') {
            alert('ÙƒÙ„Ù…Ø© Ø³Ø± Ø®Ø·Ø£');
            return;
        }
        
        updateDesignsList();
        
        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        if (globalData.settings.offers) {
            document.getElementById('offerText').value = globalData.settings.offers.join('\n');
        }
        if (globalData.settings.seoWords) {
            document.getElementById('seoText').value = globalData.settings.seoWords.join('\n');
        }
        document.getElementById('currencySymbol').value = globalData.settings.currency;
        document.getElementById('videoUrl').value = globalData.settings.videoUrl;
        
        document.getElementById('adminPanel').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function hideAdminPanel() {
        document.getElementById('adminPanel').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        document.getElementById(`tab-${tabName}`).classList.add('active');
        event.target.classList.add('active');
    }

    function updateDesignsList() {
        const list = document.getElementById('designsList');
        if (!list) return;
        
        list.innerHTML = globalData.designs.map(d => `
            <div class="list-item">
                <div class="item-info">
                    <div class="title">${d.title}</div>
                    <div class="meta">${globalData.settings.currency}${d.price} â€¢ Ø§Ù„Ø±Ù‚Ù…: ${d.id}</div>
                </div>
                <div style="display: flex; gap: 5px;">
                    <button class="success-btn" onclick="editDesign(${d.id})"><i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„</button>
                    <button class="danger-btn" onclick="deleteDesign(${d.id})"><i class="fas fa-trash"></i> Ø­Ø°Ù</button>
                </div>
            </div>
        `).join('');
    }

    function addDesign() {
        const title = document.getElementById('designTitle').value;
        const price = parseFloat(document.getElementById('designPrice').value) || 299;
        const image = document.getElementById('designImage').value;
        const preview = document.getElementById('designPreview').value || 'https://example.com';
        const desc = document.getElementById('designDesc').value || 'ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯';
        
        if (!title || !image) {
            alert('Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ø·Ù„ÙˆØ¨Ø§Ù†');
            return;
        }
        
        const newId = Math.max(...globalData.designs.map(d => d.id), 0) + 1;
        globalData.designs.push({ id: newId, title, price, image, preview, desc });
        
        saveToAll();
        renderDesigns();
        updateDesignsList();
        
        // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
        document.getElementById('designTitle').value = '';
        document.getElementById('designImage').value = '';
        document.getElementById('designPreview').value = '';
        document.getElementById('designDesc').value = '';
    }

    function editDesign(id) {
        const d = globalData.designs.find(x => x.id === id);
        if (!d) return;
        
        const newTitle = prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:', d.title);
        if (newTitle) d.title = newTitle;
        
        const newPrice = prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±:', d.price);
        if (newPrice) d.price = parseFloat(newPrice);
        
        const newImage = prompt('ØªØ¹Ø¯ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:', d.image);
        if (newImage) d.image = newImage;
        
        const newPreview = prompt('ØªØ¹Ø¯ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©):', d.preview);
        if (newPreview) d.preview = newPreview;
        
        const newDesc = prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØµÙ:', d.desc);
        if (newDesc) d.desc = newDesc;
        
        saveToAll();
        renderDesigns();
        updateDesignsList();
    }

    function deleteDesign(id) {
        if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŸ')) return;
        
        globalData.designs = globalData.designs.filter(d => d.id !== id);
        saveToAll();
        renderDesigns();
        updateDesignsList();
    }

    function updateOffers() {
        const offersText = document.getElementById('offerText').value;
        const offers = offersText.split('\n').filter(offer => offer.trim() !== '');
        
        if (offers.length > 0) {
            globalData.settings.offers = offers;
        }
        
        updateOfferBar();
        saveToAll();
    }

    function updateSeoWords() {
        const seoText = document.getElementById('seoText').value;
        const words = seoText.split('\n').filter(word => word.trim() !== '');
        
        if (words.length > 0) {
            globalData.settings.seoWords = words;
        }
        
        updateSeoWordsDisplay();
        saveToAll();
    }

    function updateSettings() {
        const currency = document.getElementById('currencySymbol').value;
        const video = document.getElementById('videoUrl').value;

        if (currency) globalData.settings.currency = currency;
        if (video) {
            globalData.settings.videoUrl = video;
            document.getElementById('videoSource').src = video;
            document.getElementById('mainVideo').load();
            document.getElementById('mainVideo').play();
        }

        saveToAll();
        renderDesigns();
    }

    function exportData() {
        const dataStr = JSON.stringify(globalData, null, 2);
        const blob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `aser-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        alert('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
    }

    function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (imported.designs && imported.settings) {
                        globalData = imported;
                        saveToAll();
                        renderAll();
                        updateDesignsList();
                        alert('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                    } else {
                        alert('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­');
                    }
                } catch(e) {
                    alert('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }

    // ========== Ø§Ù„Ø¥Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ==========
    function listenForUpdates() {
        if (database) {
            database.ref('aser_studio_data').on('value', (snapshot) => {
                const data = snapshot.val();
                if (data && JSON.stringify(data) !== JSON.stringify(globalData)) {
                    console.log('ğŸ”„ Real-time update from Firebase primary');
                    globalData = data;
                    renderAll();
                    if (document.getElementById('adminPanel').style.display === 'block') {
                        updateDesignsList();
                    }
                    showNotification('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±');
                }
            });
        }
        
        if (database2) {
            database2.ref('aser_studio_data').on('value', (snapshot) => {
                const data = snapshot.val();
                if (data && JSON.stringify(data) !== JSON.stringify(globalData)) {
                    console.log('ğŸ”„ Real-time update from Firebase secondary');
                    globalData = data;
                    renderAll();
                    if (document.getElementById('adminPanel').style.display === 'block') {
                        updateDesignsList();
                    }
                    showNotification('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±');
                }
            });
        }
    }

    // ========== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ==========
    function init() {
        loadFromFirebase();
        listenForUpdates();
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
    init();

    // Ø±Ø¨Ø· Ø§Ù„Ø¯ÙˆØ§Ù„ Ø¨Ø§Ù„Ù†Ø§ÙØ°Ø©
    window.showAdminPanel = showAdminPanel;
    window.hideAdminPanel = hideAdminPanel;
    window.switchTab = switchTab;
    window.addDesign = addDesign;
    window.editDesign = editDesign;
    window.deleteDesign = deleteDesign;
    window.updateOffers = updateOffers;
    window.updateSeoWords = updateSeoWords;
    window.updateSettings = updateSettings;
    window.exportData = exportData;
    window.importData = importData;
    window.openPreview = openPreview;
    window.reloadPreviewFrame = reloadPreviewFrame;
    window.closePreviewModal = closePreviewModal;
    window.openPurchase = openPurchase;
    window.closePurchaseModal = closePurchaseModal;
    window.sendWhatsApp = sendWhatsApp;
</script>

<!-- ========== Ø§Ù„ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ù…ÙˆØ¯ÙŠÙˆÙ„ Firebase) ========== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-analytics.js";
    
    const firebaseConfig = {
        apiKey: "AIzaSyBR8HOhNurHtpDXQQ7el8DbW-5kydA2hI8",
        authDomain: "user-8bba7.firebaseapp.com",
        projectId: "user-8bba7",
        storageBucket: "user-8bba7.firebasestorage.app",
        messagingSenderId: "816054611920",
        appId: "1:816054611920:web:8b74a954704002cc8013d5",
        measurementId: "G-NV8PHC8LEQ"
    };

    const app = initializeApp(firebaseConfig, "module-app");
    const analytics = getAnalytics(app);
    console.log('âœ… New Firebase module initialized');
</script>

<!-- Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ§Øª Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
<style>
    @keyframes slideDown {
        from { transform: translate(-50%, -100%); opacity: 0; }
        to { transform: translate(-50%, 0); opacity: 1; }
    }
    @keyframes slideUp {
        from { transform: translate(-50%, 0); opacity: 1; }
        to { transform: translate(-50%, -100%); opacity: 0; }
    }
</style>

</body>
</html>
