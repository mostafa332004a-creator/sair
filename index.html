<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Ø¨Ù‚ÙŠØ© Ø§Ù„Ù‡ÙŠØ¯ ÙƒÙ…Ø§ Ù‡ÙŠ -->
    <style>
        /* Ø£Ø¶Ù Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        
        /* Ø²Ø± Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª */
        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-order {
            background: var(--secondary);
            color: white;
            padding: 12px 20px;
            border-radius: var(--radius-small);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }
        
        .btn-order:hover {
            background: var(--secondary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 101, 132, 0.3);
        }
        
        /* Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
        .site-select-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2002;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }
        
        .site-select-content {
            width: 90%;
            max-width: 600px;
            background: var(--gradient-dark);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease-out;
        }
        
        .site-select-header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .site-select-title {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .site-select-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }
        
        .site-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .site-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .site-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
            border-color: var(--primary);
        }
        
        .site-option.selected {
            background: var(--primary);
            border-color: var(--primary-dark);
            box-shadow: 0 10px 25px rgba(108, 99, 255, 0.3);
        }
        
        .site-option i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: block;
        }
        
        .site-option.selected i {
            color: white;
        }
        
        .site-option h4 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .site-option p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin: 0;
        }
        
        .site-option.selected h4,
        .site-option.selected p {
            color: white;
        }
        
        .selected-site-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }
        
        .selected-site-name {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .selected-site-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin: 15px 0;
        }
        
        .selected-site-price span {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            margin-left: 5px;
        }
        
        .site-select-actions {
            display: flex;
            gap: 15px;
        }
        
        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
        .cart-icon {
            position: fixed;
            bottom: 180px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 998;
            box-shadow: var(--shadow);
            transition: var(--transition);
            animation: float 3s ease-in-out infinite;
            border: 3px solid white;
        }
        
        .cart-icon:hover {
            transform: scale(1.1);
            animation: none;
            box-shadow: 0 10px 30px rgba(108, 99, 255, 0.4);
        }
        
        .cart-badge {
            position: absolute;
            top: -5px;
            left: -5px;
            background: var(--secondary);
            color: white;
            font-size: 12px;
            font-weight: bold;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
        }
        
        /* Ù†Ø§ÙØ°Ø© Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2003;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }
        
        .cart-content {
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            background: var(--gradient-dark);
            border-radius: 20px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease-out;
        }
        
        .cart-header {
            padding: 25px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .cart-title {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cart-count {
            background: var(--secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .cart-body {
            padding: 30px;
        }
        
        .cart-items {
            margin-bottom: 30px;
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }
        
        .cart-item:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .cart-item-info h4 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .cart-item-info p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin: 0;
        }
        
        .cart-item-price {
            color: var(--primary);
            font-size: 1.3rem;
            font-weight: 700;
            white-space: nowrap;
        }
        
        .cart-item-remove {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .cart-item-remove:hover {
            background: #ff4444;
            color: white;
            transform: rotate(90deg);
        }
        
        .cart-empty {
            text-align: center;
            padding: 50px 20px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .cart-empty i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.2);
        }
        
        .cart-summary {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.5rem;
            color: white;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .cart-discount-note {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            text-align: center;
        }
        
        .cart-actions {
            display: flex;
            gap: 15px;
        }
        
        .btn-cart-send {
            background: #25D366;
            color: white;
            border: none;
            padding: 18px 30px;
            border-radius: var(--radius-small);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex: 1;
        }
        
        .btn-cart-send:hover {
            background: #1DA851;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
        }
        
        .btn-cart-clear {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
            padding: 18px 30px;
            border-radius: var(--radius-small);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-cart-clear:hover {
            background: rgba(255, 68, 68, 0.3);
            transform: translateY(-3px);
        }
        
        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„ØªØµÙ…ÙŠÙ…Ø§Øª */
        .card-info {
            padding-bottom: 15px;
        }
        
        /* Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†ÙˆØ§ÙØ° */
        body.modal-open {
            overflow: hidden;
        }
        
    </style>
</head>
<body>
    <!-- ... Ø¨Ù‚ÙŠØ© Ø§Ù„Ù€ HTML ÙƒÙ…Ø§ Ù‡ÙŠ ... -->
    
    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
    <div class="cart-icon" onclick="openCartModal()">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-badge" id="cartBadge">0</div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <div id="siteSelectModal" class="site-select-modal">
        <div class="site-select-content">
            <div class="site-select-header">
                <h3 class="site-select-title" id="siteSelectTitle">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                <p class="site-select-subtitle">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØµÙ…ÙŠÙ…Ù‡ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø±</p>
            </div>
            
            <div class="site-options" id="siteOptions">
                <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø³ØªÙØ¶Ø§Ù Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
            
            <div class="selected-site-info" id="selectedSiteInfo" style="display: none;">
                <h4 class="selected-site-name" id="selectedSiteName"></h4>
                <div class="selected-site-price" id="selectedSitePrice"></div>
                <p id="selectedSiteDescription"></p>
            </div>
            
            <div class="site-select-actions">
                <button class="btn-primary" onclick="addToCart()" id="addToCartBtn" style="flex: 1; padding: 16px;" disabled>
                    <i class="fas fa-cart-plus"></i> Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
                </button>
                <button class="btn-danger" onclick="closeSiteSelectModal()" style="padding: 16px;">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
    <div id="cartModal" class="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <div class="cart-title">
                    <i class="fas fa-shopping-cart"></i> Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <button class="design-modal-close" onclick="closeCartModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="cart-body">
                <div class="cart-items" id="cartItemsContainer">
                    <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø© Ø³ØªÙØ¶Ø§Ù Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
                
                <div class="cart-summary">
                    <div class="cart-total">
                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                        <span id="cartTotal">0 <span id="cartCurrency">$</span></span>
                    </div>
                    
                    <div class="cart-discount-note" id="cartDiscountNote" style="display: none;">
                        ğŸ‰ <strong>Ø¹Ø±Ø¶ Ø®Ø§Øµ!</strong> Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… 10% Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
                    </div>
                </div>
                
                <div class="cart-actions">
                    <button class="btn-cart-send" onclick="sendCartOrder()" id="sendCartBtn" disabled>
                        <i class="fab fa-whatsapp"></i> Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                    </button>
                    <button class="btn-cart-clear" onclick="clearCart()" id="clearCartBtn">
                        <i class="fas fa-trash"></i> ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ... Ø¨Ù‚ÙŠØ© Ø§Ù„Ù€ HTML ÙƒÙ…Ø§ Ù‡ÙŠ ... -->

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø·Ù„Ø¨
        let currentDesign = null; // Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®ØªØ§Ø±
        let cart = []; // Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        let siteTypes = []; // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
        
        // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±
        function initSiteTypes() {
            siteTypes = [
                {
                    id: 1,
                    name: "Ù…ÙˆÙ‚Ø¹ Ø´Ø±ÙƒØ©",
                    description: "Ù…ÙˆÙ‚Ø¹ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ù†Ø´Ø¢Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",
                    icon: "fas fa-building",
                    basePriceUSD: 299, // Ø³Ø¹Ø± Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
                    multiplier: 1.0 // Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø³Ø¹Ø± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹
                },
                {
                    id: 2,
                    name: "Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                    description: "Ù…ØªØ¬Ø± ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ù†ØªØ¬Ø§Øª",
                    icon: "fas fa-shopping-cart",
                    basePriceUSD: 499,
                    multiplier: 1.7
                },
                {
                    id: 3,
                    name: "Ù…ÙˆÙ‚Ø¹ Ø´Ø®ØµÙŠ",
                    description: "Ù…ÙˆÙ‚Ø¹ Ø´Ø®ØµÙŠ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©",
                    icon: "fas fa-user",
                    basePriceUSD: 199,
                    multiplier: 0.8
                },
                {
                    id: 4,
                    name: "Ù…Ø¯ÙˆÙ†Ø©",
                    description: "Ù…Ø¯ÙˆÙ†Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰",
                    icon: "fas fa-blog",
                    basePriceUSD: 249,
                    multiplier: 1.0
                },
                {
                    id: 5,
                    name: "Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ©",
                    description: "Ù…Ù†ØµØ© Ù„Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
                    icon: "fas fa-graduation-cap",
                    basePriceUSD: 599,
                    multiplier: 2.0
                },
                {
                    id: 6,
                    name: "Ù…ÙˆÙ‚Ø¹ Ø®Ø¯Ù…Ø§Øª",
                    description: "Ù…ÙˆÙ‚Ø¹ Ù„Ø¹Ø±Ø¶ ÙˆØ¨ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
                    icon: "fas fa-concierge-bell",
                    basePriceUSD: 349,
                    multiplier: 1.2
                },
                {
                    id: 7,
                    name: "Ù…ÙˆÙ‚Ø¹ ÙÙ†Ø¯Ù‚",
                    description: "Ù…ÙˆÙ‚Ø¹ Ù„Ø­Ø¬Ø² Ø§Ù„ØºØ±Ù ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙÙ†Ø¯Ù‚ÙŠØ©",
                    icon: "fas fa-hotel",
                    basePriceUSD: 449,
                    multiplier: 1.5
                },
                {
                    id: 8,
                    name: "Ù…ÙˆÙ‚Ø¹ Ù…Ø·Ø¹Ù…",
                    description: "Ù…ÙˆÙ‚Ø¹ Ù„Ø­Ø¬Ø² Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",
                    icon: "fas fa-utensils",
                    basePriceUSD: 399,
                    multiplier: 1.3
                }
            ];
        }
        
        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function openSiteSelectModal(design) {
            currentDesign = design;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            document.getElementById('siteSelectTitle').textContent = `Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹ Ù„ØªØµÙ…ÙŠÙ…: ${design.title}`;
            
            // ØªØ­Ù…ÙŠÙ„ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
            loadSiteOptions();
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
            document.getElementById('selectedSiteInfo').style.display = 'none';
            document.getElementById('addToCartBtn').disabled = true;
            
            // ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
            document.getElementById('siteSelectModal').style.display = 'flex';
            document.body.classList.add('modal-open');
        }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function closeSiteSelectModal() {
            document.getElementById('siteSelectModal').style.display = 'none';
            document.body.classList.remove('modal-open');
            currentDesign = null;
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
        function loadSiteOptions() {
            const container = document.getElementById('siteOptions');
            let html = '';
            
            siteTypes.forEach(site => {
                html += `
                    <div class="site-option" data-id="${site.id}" onclick="selectSiteType(${site.id})">
                        <i class="${site.icon}"></i>
                        <h4>${site.name}</h4>
                        <p>${site.description}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        let selectedSiteType = null;
        
        function selectSiteType(siteId) {
            const site = siteTypes.find(s => s.id === siteId);
            if (!site) return;
            
            selectedSiteType = site;
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
            document.querySelectorAll('.site-option').forEach(opt => {
                opt.classList.remove('selected');
                if (parseInt(opt.dataset.id) === siteId) {
                    opt.classList.add('selected');
                }
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±
            const basePrice = currentDesign.price || 299;
            const finalPrice = Math.round(basePrice * site.multiplier);
            const priceInCurrency = convertPrice(finalPrice, selectedCurrency);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
            document.getElementById('selectedSiteInfo').style.display = 'block';
            document.getElementById('selectedSiteName').textContent = site.name;
            document.getElementById('selectedSitePrice').innerHTML = `${priceInCurrency} <span>${currencySymbols[selectedCurrency]}</span>`;
            document.getElementById('selectedSiteDescription').textContent = site.description;
            
            // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
            document.getElementById('addToCartBtn').disabled = false;
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        function addToCart() {
            if (!currentDesign || !selectedSiteType) {
                alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            const basePrice = currentDesign.price || 299;
            const finalPriceUSD = Math.round(basePrice * selectedSiteType.multiplier);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ø³Ù„Ø©
            const cartItem = {
                id: Date.now(), // Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯
                designId: currentDesign.id,
                designTitle: currentDesign.title,
                siteTypeId: selectedSiteType.id,
                siteTypeName: selectedSiteType.name,
                priceUSD: finalPriceUSD,
                addedAt: new Date().toISOString()
            };
            
            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
            cart.push(cartItem);
            
            // Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø© ÙÙŠ localStorage
            saveCart();
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ù„Ø©
            updateCartUI();
            
            // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
            closeSiteSelectModal();
            
            // Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
            alert(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© "${currentDesign.title}" (${selectedSiteType.name}) Ø¥Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª`);
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø© ÙÙŠ localStorage
        function saveCart() {
            localStorage.setItem('asir_cart', JSON.stringify(cart));
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø© Ù…Ù† localStorage
        function loadCart() {
            const savedCart = localStorage.getItem('asir_cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartUI();
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ù„Ø©
        function updateCartUI() {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
            const cartCount = cart.length;
            document.getElementById('cartBadge').textContent = cartCount;
            document.getElementById('cartCount').textContent = cartCount;
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ù„Ø©
            const container = document.getElementById('cartItemsContainer');
            
            if (cartCount === 0) {
                container.innerHTML = `
                    <div class="cart-empty">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙØ§Ø±ØºØ©</h3>
                        <p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</p>
                        <button class="btn-primary" onclick="closeCartModal(); scrollToDesigns()" style="margin-top: 20px;">
                            <i class="fas fa-paint-brush"></i> ØªØµÙØ­ Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª
                        </button>
                    </div>
                `;
                document.getElementById('sendCartBtn').disabled = true;
                document.getElementById('clearCartBtn').disabled = true;
                document.getElementById('cartDiscountNote').style.display = 'none';
                document.getElementById('cartTotal').innerHTML = `0 <span id="cartCurrency">${currencySymbols[selectedCurrency]}</span>`;
                return;
            }
            
            // ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.getElementById('sendCartBtn').disabled = false;
            document.getElementById('clearCartBtn').disabled = false;
            
            // Ø¹Ø±Ø¶ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø©
            let html = '';
            let totalUSD = 0;
            
            cart.forEach(item => {
                const price = convertPrice(item.priceUSD, selectedCurrency);
                totalUSD += item.priceUSD;
                
                html += `
                    <div class="cart-item" data-id="${item.id}">
                        <div class="cart-item-info">
                            <h4>${item.designTitle}</h4>
                            <p>Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${item.siteTypeName}</p>
                        </div>
                        <div class="cart-item-price">${price} ${currencySymbols[selectedCurrency]}</div>
                        <button class="cart-item-remove" onclick="removeCartItem(${item.id})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®ØµÙ…
            let discount = 0;
            let finalUSD = totalUSD;
            
            if (cartCount >= 2) {
                discount = totalUSD * 0.10; // Ø®ØµÙ… 10% Ù„Ø·Ù„Ø¨ØªÙŠÙ† Ø£Ùˆ Ø£ÙƒØ«Ø±
                finalUSD = totalUSD - discount;
                document.getElementById('cartDiscountNote').style.display = 'block';
            } else {
                document.getElementById('cartDiscountNote').style.display = 'none';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
            const totalPrice = convertPrice(totalUSD, selectedCurrency);
            const finalPrice = convertPrice(finalUSD, selectedCurrency);
            const discountAmount = convertPrice(discount, selectedCurrency);
            
            document.getElementById('cartTotal').innerHTML = `${finalPrice} <span id="cartCurrency">${currencySymbols[selectedCurrency]}</span>`;
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®ØµÙ…
            if (discount > 0) {
                document.getElementById('cartDiscountNote').innerHTML = 
                    `ğŸ‰ <strong>Ø¹Ø±Ø¶ Ø®Ø§Øµ!</strong> Ø®ØµÙ… 10% - ØªÙ… Ø®ØµÙ… ${discountAmount} ${currencySymbols[selectedCurrency]}`;
            }
        }
        
        // Ø­Ø°Ù Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ø³Ù„Ø©
        function removeCartItem(itemId) {
            if (confirm('âš ï¸ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ')) {
                cart = cart.filter(item => item.id !== itemId);
                saveCart();
                updateCartUI();
            }
        }
        
        // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
        function clearCart() {
            if (cart.length === 0) {
                alert('Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙØ§Ø±ØºØ© Ø¨Ø§Ù„ÙØ¹Ù„');
                return;
            }
            
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ±ÙŠØº Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                cart = [];
                saveCart();
                updateCartUI();
                alert('âœ… ØªÙ… ØªÙØ±ÙŠØº Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª');
            }
        }
        
        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³Ù„Ø©
        function openCartModal() {
            updateCartUI();
            document.getElementById('cartModal').style.display = 'flex';
            document.body.classList.add('modal-open');
        }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³Ù„Ø©
        function closeCartModal() {
            document.getElementById('cartModal').style.display = 'none';
            document.body.classList.remove('modal-open');
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ù„Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
        function sendCartOrder() {
            if (cart.length === 0) {
                alert('Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙØ§Ø±ØºØ©');
                return;
            }
            
            // Ø·Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
            const clientName = prompt('ğŸ‘¤ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„:');
            if (!clientName || clientName.trim() === '') {
                alert('âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨');
                return;
            }
            
            const clientPhone = prompt('ğŸ“± Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ:');
            if (!clientPhone || clientPhone.trim() === '') {
                alert('âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨');
                return;
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
            let message = `ğŸ›’ *Ø·Ù„Ø¨ ØªØµÙ…ÙŠÙ…Ø§Øª Ù…Ù† Ù…ÙˆÙ‚Ø¹ Ø¢Ø³Ø±*\n\n`;
            message += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${clientName}\n`;
            message += `ğŸ“± *Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:* ${clientPhone}\n`;
            message += `ğŸ“… *ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨:* ${new Date().toLocaleDateString('ar-SA')}\n\n`;
            message += `ğŸ“‹ *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:*\n`;
            
            let totalUSD = 0;
            cart.forEach((item, index) => {
                const price = convertPrice(item.priceUSD, selectedCurrency);
                totalUSD += item.priceUSD;
                message += `\n${index + 1}. *${item.designTitle}*\n`;
                message += `   - Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${item.siteTypeName}\n`;
                message += `   - Ø§Ù„Ø³Ø¹Ø±: ${price} ${currencySymbols[selectedCurrency]}\n`;
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®ØµÙ…
            let discount = 0;
            if (cart.length >= 2) {
                discount = totalUSD * 0.10;
                message += `\nğŸ *Ø®ØµÙ… Ø®Ø§Øµ:* ${convertPrice(discount, selectedCurrency)} ${currencySymbols[selectedCurrency]} (10% Ø®ØµÙ…)\n`;
            }
            
            const finalUSD = totalUSD - discount;
            const finalPrice = convertPrice(finalUSD, selectedCurrency);
            
            message += `\nğŸ’° *Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:* ${finalPrice} ${currencySymbols[selectedCurrency]}\n`;
            message += `\n---\nÙ…Ø¹ ØªØ­ÙŠØ§Øª Ø´Ø±ÙƒØ© Ø¢Ø³Ø± Ù„Ù„Ø¥Ø¹Ù„Ø§Ù† ÙˆØ§Ù„Ø¯Ø¹Ø§ÙŠØ©\nğŸ“ +971 54 521 6539`;
            
            // ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/971545216539?text=${encodedMessage}`;
            
            // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨
            window.open(whatsappUrl, '_blank');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø³Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            if (confirm('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ. Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø¢Ù†ØŸ')) {
                cart = [];
                saveCart();
                updateCartUI();
                closeCartModal();
            }
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª
        function scrollToDesigns() {
            const designsSection = document.getElementById('designs');
            if (designsSection) {
                window.scrollTo({
                    top: designsSection.offsetTop - 100,
                    behavior: 'smooth'
                });
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…Ø§Øª Ù„Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø·Ù„Ø¨
        function loadDesignsSlider() {
            const container = document.getElementById('designsContainer');
            let html = '';
            
            designs.forEach(design => {
                const stars = 'â˜…'.repeat(Math.floor(design.rating)) + (design.rating % 1 >= 0.5 ? 'Â½' : '');
                const price = convertPrice(design.price, selectedCurrency);
                
                html += `
                    <div class="swiper-slide">
                        <div class="card">
                            <img src="${design.image}" alt="${design.title}" class="card-image">
                            <div class="card-info">
                                <span class="card-category">${design.category}</span>
                                <h3 class="card-title">${design.title}</h3>
                                <p class="card-description">${design.description}</p>
                                
                                <div class="card-actions">
                                    <button class="btn-order" onclick="openSiteSelectModal(${JSON.stringify(design).replace(/"/g, '&quot;')})">
                                        <i class="fas fa-cart-plus"></i> Ø£Ø·Ù„Ø¨
                                    </button>
                                    <button class="btn-view" onclick="openDesignModal(${JSON.stringify(design).replace(/"/g, '&quot;')})">
                                        <i class="fas fa-eye"></i> Ø¹Ø±Ø¶
                                    </button>
                                </div>
                                
                                <div class="card-footer">
                                    <div class="card-price" data-price="${design.price}">
                                        <span>${currencySymbols[selectedCurrency]}</span>${price}
                                    </div>
                                    <div class="card-rating">${stars} ${design.rating}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            if (designsSwiper) designsSwiper.update();
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ù…Ø¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        document.addEventListener('DOMContentLoaded', async function() {
            // ... Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ ...
            
            // ØªÙ‡ÙŠØ¦Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
            initSiteTypes();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø©
            loadCart();
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ESC
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeVideoModal();
                    closeDesignModal();
                    closeSiteSelectModal();
                    closeCartModal();
                }
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¨Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.addEventListener('click', function(event) {
                const siteModal = document.getElementById('siteSelectModal');
                const cartModalElement = document.getElementById('cartModal');
                
                if (siteModal.style.display === 'flex' && event.target === siteModal) {
                    closeSiteSelectModal();
                }
                
                if (cartModalElement.style.display === 'flex' && event.target === cartModalElement) {
                    closeCartModal();
                }
            });
        });
    </script>
</body>
</html>
